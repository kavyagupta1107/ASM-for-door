;clock freq assumed-2.5MHz
;generating a delay of 1s after starting the motor

.MODEL TINY
.DATA

DOORSTATE DB 0
MOTORC EQU __

.CODE 
.EXIT

OPENDOOR PROC NEAR 
CALL START_TIMER
IN AL,MOTORC
AND AL,11111100b
OR AL,00000001b
OUT MOTORC,AL
CALL DELAY_1

IN AL,MOTORC
AND AL,11111100b
OUT MOTORC,AL

MOV DOORSTATE,1
RET
OPENDOOR ENDP


CLOSEDOOR PROC NEAR

IN AL,MOTORC
AND AL,11111100b
OR AL,00000010b
OUT MOTORC,AL
CALL DELAY_1

IN AL,MOTORC
AND AL,11111100b
OUT MOTORC,AL

MOV DOORSTATE,0
RET
CLOSEDOOR ENDP


DELAY_1 PROC NEAR USES BX
MOV BX,1D107H 
A:DEC BX
  NOP
  JNZ A 
RET

DELAY_1 ENDP





